## 10. Promise의 비밀

<br>

지난 시간의 큐 태스크에서는, 이벤트 루프는 큐 태스크에 있는 아이를 하나씩만 콜 스택에 가져 오고 나서 원래 하던 순회를 계속 빙글빙글 돌다가 하나 가지고 오고 이런 식으로 진행했었다.

<br>

![21](https://user-images.githubusercontent.com/75867748/109422473-04eabe80-7a1f-11eb-8a2b-a91818421dae.jpg)

![22](https://user-images.githubusercontent.com/75867748/109422474-061beb80-7a1f-11eb-9c34-8e5ba61ea6b6.png)

하지만 마이크로 태스크는 큐 안에 있는 모든 아이들이 없어질 때까지 거기에 머물러 있으며, 거기에 새로운 아이들이 들어오면 다 함께 처리를 계속적으로 하게 된다. 그래서 순회를 하지 못하고 있다가 마이크로 태스크가 완전히 비워질 때 비로소 순회를 할 수 있게 되면서 렌더링을 할 수 있게 된다. 따라서 프로미스를 반복적으로 호출하게 된다면 브라우저는 반응하지 않는 문제가 발생할 수 있다.

---

##### 마이크로 태스크 큐와 태스크 큐의 차이점

- 태스크 큐는 이벤트 루프가 하나씩 옮겨놓고 다시 빙글빙글 도는 반면에
- 마이크로 태스크 큐는 여기에 들어 있는 모든 콜백 함수 뿐만 아니라 머물러 있는 동안 새로 추가되는 아이템까지도 실행이 다 될 때까지 기다리고 나서 이벤트 루프를 돌아가게 된다.
