### HTTP 특징 3 - 비연결성(connectionless)

<br />

##### 1. 연결을 유지하는 모델

TCP/IP 연결의 경우 기본적으로 연결을 유지한다. 예를 들어, 클라이언트1이 요청을 하고 서버가 응답을 한다. 그러면 이 둘은 연결이 되어 있다. 이 상태에서 또 클라이언트2가 서버에게 요청을 하고 응답을 받는다. 그러면 이 둘도 연결이 된다. 클라이언트 3도 이런 식으로 연결이 된다. 그러면 서버는 세 클라이언트에 대해 연결을 계속 유지하고 있어서 클라이언트가 놀고 있어도 서버 자원이 계속 소모된다.

<br />

##### 2. 연결을 유지하지 않는 모델

이번에는 연결을 유지하지 않는 모델을 살펴보자. 클라이언트1이 요청을 해서 서버가 응답을 준 다음 종료되면 연결을 끊어버린다. 또 클라이언트2, 3도 연결을 했다가 끊어버린다. 이렇게 하면 서버는 요청을 받을 때만 연결을 하고 그 외에는 연결을 끊기 때문에 최소한의 자원만 사용해서 효율적이다.

<br />

http는 기본적으로 연결을 유지하지 않는 모델이다. 예를 들어 웹의 경우, 수천명이 서비스를 사용해도 실제 서버에서 동시에 처리하는 요청은 수십개 이하로 매우 적어서 서버 자원을 생각보다 크게 소모하지 않는다.

<br />

##### 3. 비연결성 한계와 극복

1. TCP/IP 연결을 새로 맺어야 해서 3 way handshake 시간이 추가
2. 웹 브라우저로 사이트를 요청하면 html뿐 아니라 js, css, img 등 수많은 자원이 함께 다운로드된다.

그래서 매번 연결을 새로 하고 3 way handshake하고 자원을 다운 받는 게 비효율 적이다.

3. HTTP 지속 연결 :

그래서 'HTTP 지속 연결'을 기본적으로 써서 해결한다. 예전에는 연결-자원 다운-종료, 또 연결-자원 다운-종료... 이렇게 반복했는데, 이제는 일단 연결을 하고 나서 필요한 자원(html, js 등)을 다 받고 나면 종료를 한다. 또 HTTP2와 3에서는 훨씬 최적화됨

<br />

##### 4. 스테이스리스를 기억하자

- 이벤트 페이지와 같이 같은 시간에 딱 맞추어 발생하는 대용량 트래픽은 많은 서버 개발자들이 어려워한다.
- 최대한 스테이스리스하게 설계를 하자.
- 이런 대용량 트래픽이 와도 서버를 확 늘려서 대응을 할 수 있다.
- 예를 들어 처음에는 로그인 기능도 없는 순수한 정적 웹페이지를 올린다. 무상태.
- 그리고 거기서 사람들을 대기시키다가 이벤트 버튼을 클릭하게 만든다.
