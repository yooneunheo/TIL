### HTTP 메서드의 속성

<br />

- 안전
- 멱등
- 캐시가능

---

#### 1. 안전

- 호출해도 리소스를 변경하지 않는다
- GET은 단순 조회라 안전함
- PUT, PATCH, DELETE 등 호출마다 변경이 일어나는 건 안전하지 않다.
- Q. 계속 호출해서 로그 같은 게 쌓여서 장애가 발생하면?
- A. 안전은 '리소스의 변경'만 고려하지 그 외의 것들은 고려 안한다.

---

#### 2. 멱등

- 한 번 호출하든 여러 번 호출하든 결과가 같다
- 멱등 메서드

  - GET : 한 번 조회하든, 두 번 조회하든 같은 결과 조회
  - PUT : 결과를 대체. 같은 요청 여러번해도 최종 결과는 같다 ("똑같은 파일을 업로드")
  - DELETE : 결과를 삭제. 같은 요청 여러번 해도 삭제된 결과는 똑같다
  - POST : 멱등이 아니다! 예를 들어 결제를 할 때, 두 번 호출하면 결제가 중복해서 발생.

- 멱등의 활용? 자동 복구 메커니즘
- 예를 들어 DELTE를 했는데 서버에서 응답이 없다. 그러면 DELETE가 제대로 됐는지 안 됐는지 모름. 그래서 클라이언트가 다시 삭제 요청을 한다. 그래도 결과는 같음.

- 멱등은 외부 요인으로 중간에 리로스가 변경되는 것까진 고려하지 않는다. 따라서 예를 들어 계속 GET으로 정보를 조회하는데 중간에 리소스가 변경이 된다면, 변경전 상태를 그대로 조회하는게 아니라 변경이 된 상태를 조회한다.

---

#### 3. 캐시 가능

- 응답 결과 리소스를 캐시해서 사용해도 되는가?
- GET, GEAD, POST, PATCH 캐시 가능
- 실제로는 GET, HEAD 정도만 캐시로 사용
  - 캐시가 되려면 키가 맞아야 한다. 똑같은 리소스와 키가 맞아야 한다. GET은 URL만 키로 잡고 캐시를 하면 되서 심플하지만, POST는 바디 안에 데이터를 보내는 등 고려해야 할 게 많아서 잘 안됨
  - POST, PATCH는 본문 내용까지 캐시 키로 고려해야 하는데, 구현이 쉽지 않음
  - 그래서 실무에서는 GET만 캐시로 사용한다고 생각

<BR />
